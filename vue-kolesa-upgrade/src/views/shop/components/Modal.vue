<template>
  <div>
    <!-- Backdrop -->
    <div class="modal__backdrop" v-if="isOpen" @click="closeModal()"></div>
    <!-- Modal -->
    <div class="modal" v-if="isOpen">
      <div class="modal__content">
        <button type="button">
          <img
            :src="require(`@/assets/Close/close_big.svg`)"
            alt="close sign"
            class="modal__close"
            @click="closeModal()"
          />
        </button>
        <div class="modal__body">
          <div class="modal__images">
            <img
              :src="require(`@/assets/${data.img}`)"
              alt="–°–∞–º–∞—è –º–æ–¥–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞"
            />
            <div class="modal__previews">
              <img
                class="modal__img"
                :src="require(`@/assets/image.png`)"
                alt="–¢—Ä–µ—Ç—å—è –º–æ–¥–Ω–∞—è —Ñ–æ—Ç–∫–∞"
              />
              <img
                class="modal__img"
                :src="require(`@/assets/image_1.png`)"
                alt="–ü–µ—Ä–≤–∞—è –º–æ–¥–Ω–∞—è —Ñ–æ—Ç–∫–∞"
              />
              <img
                class="modal__img"
                :src="require(`@/assets/image_2.png`)"
                alt="–í—Ç–æ—Ä–∞—è –º–æ–¥–Ω–∞—è —Ñ–æ—Ç–∫–∞"
              />
            </div>
          </div>
          <div class="modal__description">
            <div class="modal__description-head">
              <h1 class="modal__title">{{ data.title }}</h1>
              <p class="modal__price">{{ data.price }} –±–∞–ª–ª–æ–≤</p>
              <button type="button" class="modal__buy" @click="order()">
                –ó–∞–∫–∞–∑–∞—Ç—å
              </button>
            </div>
            <div class="modal__balance">
              <div class="modal__balance-details">
                <p class="modal__balance-text">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å:</p>
                <p class="modal__balance-amount">{{ data.score }} –±–∞–ª–ª–æ–≤</p>
              </div>
              <span class="modal__balance-icon">üõç</span>
            </div>
            <div class="modal__colors">
              <h3 class="modal__subtitle modal__subtitle--bottom">–¶–≤–µ—Ç–∞:</h3>
              <form class="modal__form">
                <div class="modal__colors-btn">
                  <input
                    class="modal__input"
                    id="radio-1"
                    type="radio"
                    name="radio"
                    value="blue"
                    checked
                  />
                  <div
                    class="modal__color-block modal__color-block--blue"
                  ></div>
                  <label class="modal__label" for="radio-1">–°–∏–Ω–∏–π</label>
                </div>

                <div class="modal__colors-btn">
                  <input
                    class="modal__input"
                    id="radio-2"
                    type="radio"
                    name="radio"
                    value="beige"
                  />
                  <div
                    class="modal__color-block modal__color-block--beige"
                  ></div>
                  <label class="modal__label" for="radio-2">–ë–µ–∂–µ–≤—ã–π</label>
                </div>

                <div class="modal__colors-btn">
                  <input
                    class="modal__input"
                    id="radio-3"
                    type="radio"
                    name="radio"
                    value="gray"
                  />
                  <div
                    class="modal__color-block modal__color-block--gray"
                  ></div>
                  <label class="modal__label" for="radio-3">–°–µ—Ä—ã–π</label>
                </div>
              </form>
            </div>
            <div class="modal__sizes">
              <h3 class="modal__subtitle modal__subtitle--bottom">–†–∞–∑–º–µ—Ä:</h3>
              <form class="modal__form">
                <div class="modal__sizes-btn">
                  <input
                    class="modal__input"
                    id="radio-4"
                    type="radio"
                    name="radio"
                    value="small"
                    checked
                  />
                  <div class="size-block"></div>
                  <label class="modal__label" for="radio-4">S</label>
                </div>

                <div class="modal__sizes-btn">
                  <input
                    class="modal__input"
                    id="radio-5"
                    type="radio"
                    name="radio"
                    value="medium"
                  />
                  <div class="size-block"></div>
                  <label class="modal__label" for="radio-5">M</label>
                </div>

                <div class="modal__sizes-btn">
                  <input
                    class="modal__input"
                    id="radio-6"
                    type="radio"
                    name="radio"
                    value="large"
                  />
                  <div class="size-block"></div>
                  <label class="modal__label" for="radio-6">L</label>
                </div>
              </form>
            </div>
            <div class="modal__details">
              <h3 class="modal__subtitle modal__subtitle--weight">–î–µ—Ç–∞–ª–∏:</h3>
              <p class="modal__text">
                {{ data.details }}
              </p>
            </div>
            <div class="modal__choose">
              <h3 class="modal__subtitle modal__subtitle--weight">
                –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Ä–∞–∑–º–µ—Ä:
              </h3>
              <p class="modal__text">–ù–∞–ø–∏—Å–∞—Ç—å –¥—è–¥–µ –†–∏–∫—É –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "Modal",
  props: {
    isOpen: Boolean,
    data: Object,
  },
  data() {
    return {
      isShowModal: false,
      clothes: [],
      accessories: [],
      all: [""],
      tabs: ["–í—Å–µ —Ç–æ–≤–∞—Ä—ã", "–û–¥–µ–∂–¥–∞", "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã"],
      tabsActive: 0,
      score: 500,
    };
  },
  computed: {
    allCards() {
      return this.clothes.concat(this.accessories).sort(this.newSort);
    },
    show() {
      if (this.tabsActive === 0) {
        return this.allCards;
      }

      if (this.tabsActive === 1) {
        return this.clothes;
      }

      if (this.tabsActive === 2) {
        return this.accessories;
      }

      return this.tabsActive;
    },
  },
  methods: {
    newSort(x, y) {
      if (x.isNew === y.isNew) {
        return 0;
      }
      if (x.isNew) {
        return -1;
      }
      return 1;
    },
    openModal() {
      this.isShowModal = true;
    },
    closeModal() {
      this.$emit("close");
    },
    order() {
      const { score } = this.$store.state.userInfo;

      if (score - this.data.price <= 0) {
        alert("your score is not enough");
        return;
      }

      this.$store.commit("setNewScore", this.data.price);
    },
  },
};
</script>
